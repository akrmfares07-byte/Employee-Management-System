<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ูุธุงู ุฅุฏุงุฑุฉ ุงูููุธููู</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;500;600;700&family=Work+Sans:wght@300;400;500;600&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <link rel="stylesheet" href="system.css">
</head>
<body>

  <!-- Login/Registration Screen -->
  <div id="authScreen" class="auth-screen">
    <div class="auth-container">
      <!-- Language Switcher -->
      <div class="language-switcher">
        <button class="lang-btn active" data-lang="ar">ุงูุนุฑุจูุฉ</button>
        <button class="lang-btn" data-lang="en">English</button>
      </div>

      <div class="auth-header">
        <h1 data-ar="ูุธุงู ุฅุฏุงุฑุฉ ุงูููุธููู" data-en="Employee Management System">ูุธุงู ุฅุฏุงุฑุฉ ุงูููุธููู</h1>
        <p class="subtitle" data-ar="ูุฑุญุจุงู ุจู ูู ูุธุงู ุฅุฏุงุฑุฉ ุงููุฑูู" data-en="Welcome to Team Management System">ูุฑุญุจุงู ุจู ูู ูุธุงู ุฅุฏุงุฑุฉ ุงููุฑูู</p>
      </div>

      <div class="role-selector">
        <button class="role-btn active" data-role="member">
          <i class="fas fa-user"></i>
          <span data-ar="ููุธู" data-en="Employee">ููุธู</span>
        </button>
        <button class="role-btn" data-role="leader">
          <i class="fas fa-users"></i>
          <span data-ar="ูุงุฆุฏ ูุฑูู" data-en="Team Leader">ูุงุฆุฏ ูุฑูู</span>
        </button>
        <button class="role-btn" data-role="admin">
          <i class="fas fa-user-shield"></i>
          <span data-ar="ูุฏูุฑ" data-en="Admin">ูุฏูุฑ</span>
        </button>
      </div>

      <form id="authForm" class="auth-form">
        <!-- Common Fields -->
        <div id="commonFields">
          <div class="form-group">
            <label data-ar="ุงูุงุณู" data-en="Name">ุงูุงุณู</label>
            <input type="text" id="userName" placeholder="" data-placeholder-ar="ุฃุฏุฎู ุงุณูู" data-placeholder-en="Enter your name" required>
          </div>
          <div class="form-group">
            <label data-ar="ูููุฉ ุงููุฑูุฑ (4 ุฃุฑูุงู)" data-en="Password (4 digits)">ูููุฉ ุงููุฑูุฑ (4 ุฃุฑูุงู)</label>
            <input type="password" id="userPassword" placeholder="โขโขโขโข" maxlength="4" pattern="[0-9]{4}" required>
          </div>
        </div>

        <!-- Registration Fields (for members and leaders) -->
        <div id="registerFields" class="hidden">
          <div class="form-group">
            <label data-ar="ุฑูู ุงููุงุชุณุงุจ" data-en="WhatsApp Number">ุฑูู ุงููุงุชุณุงุจ</label>
            <input type="tel" id="regWhatsapp" placeholder="01xxxxxxxxx">
          </div>
          <div class="form-group">
            <label data-ar="ุงูุจุฑูุฏ ุงูุฅููุชุฑููู" data-en="Email">ุงูุจุฑูุฏ ุงูุฅููุชุฑููู</label>
            <input type="email" id="regEmail" placeholder="" data-placeholder-ar="example@email.com" data-placeholder-en="example@email.com">
          </div>
          
          <!-- Member specific fields -->
          <div id="memberRegFields" class="hidden">
            <div class="form-group">
              <label data-ar="ููู ุงูุฅุฌุงุฒุฉ" data-en="Day Off">ููู ุงูุฅุฌุงุฒุฉ</label>
              <select id="regDayOff">
                <option value="" data-ar="ุงุฎุชุฑ ููู ุงูุฅุฌุงุฒุฉ" data-en="Select Day Off">ุงุฎุชุฑ ููู ุงูุฅุฌุงุฒุฉ</option>
                <option value="ุงูุณุจุช">ุงูุณุจุช / Saturday</option>
                <option value="ุงูุฃุญุฏ">ุงูุฃุญุฏ / Sunday</option>
                <option value="ุงูุงุซููู">ุงูุงุซููู / Monday</option>
                <option value="ุงูุซูุงุซุงุก">ุงูุซูุงุซุงุก / Tuesday</option>
                <option value="ุงูุฃุฑุจุนุงุก">ุงูุฃุฑุจุนุงุก / Wednesday</option>
                <option value="ุงูุฎููุณ">ุงูุฎููุณ / Thursday</option>
                <option value="ุงูุฌูุนุฉ">ุงูุฌูุนุฉ / Friday</option>
              </select>
            </div>
            <div class="form-group">
              <label data-ar="ููุช ุงูุญุถูุฑ" data-en="Check-in Time">ููุช ุงูุญุถูุฑ</label>
              <input type="time" id="regCheckIn">
            </div>
            <div class="form-group">
              <label data-ar="ููุช ุงูุงูุตุฑุงู" data-en="Check-out Time">ููุช ุงูุงูุตุฑุงู</label>
              <input type="time" id="regCheckOut">
            </div>
          </div>

          <!-- Leader specific fields -->
          <div id="leaderRegFields" class="hidden">
            <div class="form-group">
              <label data-ar="ุงูุดููุช" data-en="Shift">ุงูุดููุช</label>
              <select id="regShift">
                <option value="" data-ar="ุงุฎุชุฑ ุงูุดููุช" data-en="Select Shift">ุงุฎุชุฑ ุงูุดููุช</option>
                <option value="ุตุจุงุญู" data-ar="ุตุจุงุญู" data-en="Morning">ุตุจุงุญู / Morning</option>
                <option value="ูุณุงุฆู" data-ar="ูุณุงุฆู" data-en="Evening">ูุณุงุฆู / Evening</option>
              </select>
            </div>
          </div>
        </div>

        <button type="submit" class="btn btn-primary" data-ar="ุฏุฎูู" data-en="Login">ุฏุฎูู</button>
        <button type="button" id="toggleRegister" class="btn btn-secondary" data-ar="ุชุณุฌูู ููุธู ุฌุฏูุฏ" data-en="Register New Employee">ุชุณุฌูู ููุธู ุฌุฏูุฏ</button>
      </form>
    </div>
  </div>

  <!-- Member Dashboard -->
  <div id="memberDashboard" class="dashboard hidden">
    <nav class="navbar">
      <div class="nav-content">
        <div class="logo">ูุธุงู ุงูููุธููู</div>
        <div class="nav-right">
          <div class="user-info">
            <div class="user-avatar" id="memberAvatar"></div>
            <span id="memberNameNav"></span>
          </div>
          <button class="btn-logout" onclick="logout()">
            <i class="fas fa-sign-out-alt"></i>
            ุชุณุฌูู ุฎุฑูุฌ
          </button>
        </div>
      </div>
    </nav>

    <div class="container">
      <section class="hero-section">
        <div class="section-label">ููุญุฉ ุงูุชุญูู</div>
        <h1>ูุฑุญุจุงูุ <span class="highlight" id="memberNameHero"></span></h1>
        <p class="hero-subtitle">ููุง ููููู ูุชุงุจุนุฉ ููุงูู ูููุงุนูุฏ ุนููู</p>
      </section>

      <div class="stats-grid">
        <div class="stat-card">
          <div class="stat-icon">
            <i class="fas fa-clock"></i>
          </div>
          <div class="stat-details">
            <div class="stat-label">ููุช ุงูุญุถูุฑ</div>
            <div class="stat-value" id="memberCheckIn">--:--</div>
          </div>
        </div>
        <div class="stat-card">
          <div class="stat-icon">
            <i class="fas fa-sign-out-alt"></i>
          </div>
          <div class="stat-details">
            <div class="stat-label">ููุช ุงูุงูุตุฑุงู</div>
            <div class="stat-value" id="memberCheckOut">--:--</div>
          </div>
        </div>
        <div class="stat-card">
          <div class="stat-icon">
            <i class="fas fa-calendar-day"></i>
          </div>
          <div class="stat-details">
            <div class="stat-label">ููู ุงูุฅุฌุงุฒุฉ</div>
            <div class="stat-value" id="memberDayOff">---</div>
          </div>
        </div>
      </div>

      <!-- Attendance Actions -->
      <div class="content-section">
        <div class="section-header">
          <h2>ุชุณุฌูู ุงูุญุถูุฑ ูุงูุงูุตุฑุงู</h2>
        </div>
        <div class="attendance-actions">
          <button class="btn-attendance btn-check-in" onclick="recordCheckIn()">
            <i class="fas fa-sign-in-alt"></i>
            <span>ุชุณุฌูู ุญุถูุฑ</span>
          </button>
          <button class="btn-attendance btn-check-out" onclick="recordCheckOut()">
            <i class="fas fa-sign-out-alt"></i>
            <span>ุชุณุฌูู ุงูุตุฑุงู</span>
          </button>
        </div>
      </div>

      <!-- Request Buttons -->
      <div class="content-section">
        <div class="section-header">
          <h2>ุงูุทูุจุงุช</h2>
        </div>
        <div class="request-buttons">
          <button class="btn-request btn-exception" onclick="openExceptionModal()">
            <i class="fas fa-user-clock"></i>
            <div>
              <strong>ุทูุจ ุงุณุชุฆุฐุงู</strong>
              <span>ุงููุบุงุฏุฑุฉ ูู ููุช ูุฎุชูู</span>
            </div>
          </button>
          <button class="btn-request btn-break" onclick="openBreakModal()">
            <i class="fas fa-coffee"></i>
            <div>
              <strong>ุทูุจ ุจุฑูู</strong>
              <span>ุงุณุชุฑุงุญุฉ ูุตูุฑุฉ</span>
            </div>
          </button>
          <button class="btn-request btn-vacation" onclick="openVacationModal()">
            <i class="fas fa-umbrella-beach"></i>
            <div>
              <strong>ุทูุจ ุฅุฌุงุฒุฉ</strong>
              <span>ุชูุฏูู ุทูุจ ุฅุฌุงุฒุฉ ุฑุณููุฉ</span>
            </div>
          </button>
        </div>
      </div>

      <div class="content-section">
        <div class="section-header">
          <h2>ุงูููุงู ุงููุณูุฏุฉ ุฅููู</h2>
        </div>
        <div id="memberTasks" class="tasks-container"></div>
      </div>
    </div>
  </div>

  <!-- Leader Dashboard -->
  <div id="leaderDashboard" class="dashboard hidden">
    <nav class="navbar">
      <div class="nav-content">
        <div class="logo">ูุธุงู ุงูููุงุฏุฉ</div>
        <div class="nav-right">
          <div class="user-info">
            <div class="user-avatar" id="leaderAvatar"></div>
            <span id="leaderNameNav"></span>
            <span class="user-badge" id="leaderShiftBadge"></span>
          </div>
          <button class="btn-logout" onclick="logout()">
            <i class="fas fa-sign-out-alt"></i>
            ุชุณุฌูู ุฎุฑูุฌ
          </button>
        </div>
      </div>
    </nav>

    <div class="container">
      <section class="hero-section">
        <div class="section-label">ููุญุฉ ุงูููุงุฏุฉ</div>
        <h1>ุฃููุงูุ <span class="highlight" id="leaderNameHero"></span></h1>
        <p class="hero-subtitle">ุฅุฏุงุฑุฉ ุงููุฑูู ูุงูููุงู</p>
      </section>

      <div class="stats-grid">
        <div class="stat-card">
          <div class="stat-icon">
            <i class="fas fa-users"></i>
          </div>
          <div class="stat-details">
            <div class="stat-label">ุฅุฌูุงูู ุงูููุธููู</div>
            <div class="stat-value" id="totalMembers">0</div>
          </div>
        </div>
        <div class="stat-card">
          <div class="stat-icon">
            <i class="fas fa-user-check"></i>
          </div>
          <div class="stat-details">
            <div class="stat-label">ุงูุญุงุถุฑูู</div>
            <div class="stat-value" id="presentMembers">0</div>
          </div>
        </div>
        <div class="stat-card">
          <div class="stat-icon">
            <i class="fas fa-user-times"></i>
          </div>
          <div class="stat-details">
            <div class="stat-label">ุงูููุตุฑููู</div>
            <div class="stat-value" id="absentMembers">0</div>
          </div>
        </div>
      </div>

      <div class="content-section">
        <div class="section-header">
          <h2>ุงูููุธููู</h2>
          <div class="filters">
            <button class="filter-btn active" data-filter="all">ุงููู</button>
            <button class="filter-btn" data-filter="present">ุงูุญุงุถุฑูู</button>
            <button class="filter-btn" data-filter="absent">ุงูููุตุฑููู</button>
          </div>
        </div>
        <div class="table-responsive">
          <table class="data-table">
            <thead>
              <tr>
                <th>ุงูุงุณู</th>
                <th>ุงููุงุชุณุงุจ</th>
                <th>ุงูุญุงูุฉ</th>
                <th>ููุช ุงูุญุถูุฑ</th>
                <th>ููุช ุงูุงูุตุฑุงู</th>
                <th>ุงูุฅุฌุฑุงุกุงุช</th>
              </tr>
            </thead>
            <tbody id="membersTableBody"></tbody>
          </table>
        </div>
      </div>

      <div class="content-section">
        <div class="section-header">
          <h2>ุฅุณูุงุฏ ูููุฉ ุฌุฏูุฏุฉ</h2>
        </div>
        <form id="taskForm" class="task-form">
          <div class="form-row">
            <div class="form-group">
              <label>ุงูููุธู</label>
              <select id="taskMember" required>
                <option value="">ุงุฎุชุฑ ุงูููุธู</option>
              </select>
            </div>
            <div class="form-group">
              <label>ููุน ุงููููุฉ</label>
              <select id="taskType" required>
                <option value="">ุงุฎุชุฑ ุงูููุน</option>
                <option value="ููููุชุงุช">ููููุชุงุช</option>
                <option value="ููุชูููุดู">ููุชูููุดู</option>
                <option value="ุจูุณุชุงุช ูุฎุตุตุฉ">ุจูุณุชุงุช ูุฎุตุตุฉ</option>
                <option value="ุงูุณุชุง">ุงูุณุชุง</option>
                <option value="ุงูุจููุณ ูุฏูู">ุงูุจููุณ ูุฏูู</option>
                <option value="ุงูุจููุณ ุฌุฏูุฏ">ุงูุจููุณ ุฌุฏูุฏ</option>
                <option value="ุงูุจููุณ ุงูุณุชุง">ุงูุจููุณ ุงูุณุชุง</option>
              </select>
            </div>
          </div>
          <div class="form-group">
            <label>ุชูุงุตูู ุงููููุฉ</label>
            <textarea id="taskDetails" placeholder="ุงูุชุจ ุชูุงุตูู ุงููููุฉ ููุง..." rows="3" required></textarea>
          </div>
          <button type="submit" class="btn btn-primary">ุฅุณูุงุฏ ุงููููุฉ</button>
        </form>

        <div class="section-header" style="margin-top: 40px;">
          <h3>ุงูููุงู ุงููุณูุฏุฉ</h3>
        </div>
        <div id="allTasks" class="tasks-container"></div>
      </div>
    </div>
  </div>

  <!-- Admin Dashboard -->
  <div id="adminDashboard" class="dashboard hidden">
    <nav class="navbar">
      <div class="nav-content">
        <div class="logo">ููุญุฉ ุงูุฅุฏุงุฑุฉ</div>
        <div class="nav-right">
          <div class="user-info">
            <div class="user-avatar">
              <i class="fas fa-shield-alt"></i>
            </div>
            <span>ูุงุฑุณ ุฃูุฑู</span>
          </div>
          <button class="btn-logout" onclick="logout()">
            <i class="fas fa-sign-out-alt"></i>
            ุชุณุฌูู ุฎุฑูุฌ
          </button>
        </div>
      </div>
    </nav>

    <!-- Sidebar + Content Layout -->
    <div class="admin-with-sidebar">
      
      <!-- Sidebar -->
      <aside class="dashboard-sidebar">
        <div class="sidebar-menu">
          <a href="#" class="sidebar-item active" onclick="showAdminTab('overview'); return false;">
            <i class="fas fa-home"></i>
            <span>ูุธุฑุฉ ุนุงูุฉ</span>
          </a>
          
          <a href="#" class="sidebar-item" onclick="showAdminTab('employees'); return false;">
            <i class="fas fa-users"></i>
            <span>ุงูููุธููู</span>
          </a>
          
          <a href="#" class="sidebar-item" onclick="showAdminTab('tasks'); return false;">
            <i class="fas fa-tasks"></i>
            <span>ุงูููุงู</span>
          </a>
          
          <a href="#" class="sidebar-item" onclick="showAdminTab('users'); return false;">
            <i class="fas fa-user-cog"></i>
            <span>ุงููุณุชุฎุฏููู</span>
          </a>
          
          <a href="#" class="sidebar-item" onclick="showAdminTab('requests'); return false;">
            <i class="fas fa-inbox"></i>
            <span>ุงูุทูุจุงุช</span>
            <span class="sidebar-badge" id="sidebarRequestsCount">0</span>
          </a>
          
          <a href="#" class="sidebar-item" onclick="showAdminTab('reports'); return false;">
            <i class="fas fa-chart-bar"></i>
            <span>ุงูุชูุงุฑูุฑ</span>
          </a>
          
          <a href="#" class="sidebar-item" onclick="showAdminTab('activity'); return false;">
            <i class="fas fa-history"></i>
            <span>ุณุฌู ุงูุชุญุฑูุงุช</span>
          </a>
          
          <a href="#" class="sidebar-item" onclick="showAdminTab('settings'); return false;">
            <i class="fas fa-cog"></i>
            <span>ุงููุณุฎ ุงูุงุญุชูุงุทู</span>
          </a>
        </div>
      </aside>

      <!-- Main Content -->
      <div class="dashboard-content">
        
        <!-- Tab: Overview -->
        <div id="admin-tab-overview" class="admin-tab active">

    <div class="container">
      <section class="hero-section">
        <div class="section-label">ุงูุฅุฏุงุฑุฉ ุงููุงููุฉ</div>
        <h1>ููุญุฉ <span class="highlight">ุงููุฏูุฑ</span></h1>
        <p class="hero-subtitle">ุตูุงุญูุงุช ูุงููุฉ ูุฅุฏุงุฑุฉ ุงููุธุงู</p>
      </section>

      <!-- Enhanced Statistics -->
      <div class="stats-grid-enhanced">
        <div class="stat-card-enhanced">
          <div class="stat-icon-large">
            <i class="fas fa-chart-line"></i>
          </div>
          <div class="stat-content">
            <h4>ูุนุฏู ุงูุญุถูุฑ</h4>
            <div class="stat-value-large" id="attendanceRate">0%</div>
            <p class="stat-description">ูุณุจุฉ ุงูุงูุชุฒุงู ุจุงูููุงุนูุฏ</p>
          </div>
        </div>
        
        <div class="stat-card-enhanced">
          <div class="stat-icon-large">
            <i class="fas fa-star"></i>
          </div>
          <div class="stat-content">
            <h4>ูุชูุณุท ุงูุชูููู</h4>
            <div class="stat-value-large" id="averageRating">0</div>
            <p class="stat-description">ูู 5</p>
          </div>
        </div>
        
        <div class="stat-card-enhanced">
          <div class="stat-icon-large">
            <i class="fas fa-tasks"></i>
          </div>
          <div class="stat-content">
            <h4>ุงูููุงู ุงูููุชููุฉ</h4>
            <div class="stat-value-large" id="completedTasks">0</div>
            <p class="stat-description">ูู ุฅุฌูุงูู ุงูููุงู</p>
          </div>
        </div>
        
        <div class="stat-card-enhanced">
          <div class="stat-icon-large">
            <i class="fas fa-exclamation-triangle"></i>
          </div>
          <div class="stat-content">
            <h4>ุงูุฅูุฐุงุฑุงุช ุงููุดุทุฉ</h4>
            <div class="stat-value-large" id="totalWarnings">0</div>
            <p class="stat-description">ุฅุฌูุงูู ุงูุฅูุฐุงุฑุงุช</p>
          </div>
        </div>
      </div>

      <!-- Basic Statistics -->
      <div class="stats-grid">
        <div class="stat-card">
          <div class="stat-icon">
            <i class="fas fa-users"></i>
          </div>
          <div class="stat-details">
            <div class="stat-label">ุฅุฌูุงูู ุงูููุธููู</div>
            <div class="stat-value" id="adminTotalMembers">0</div>
          </div>
        </div>
        <div class="stat-card">
          <div class="stat-icon">
            <i class="fas fa-user-tie"></i>
          </div>
          <div class="stat-details">
            <div class="stat-label">ูุงุฏุฉ ุงููุฑู</div>
            <div class="stat-value" id="adminTotalLeaders">0</div>
          </div>
        </div>
        <div class="stat-card">
          <div class="stat-icon">
            <i class="fas fa-check-circle"></i>
          </div>
          <div class="stat-details">
            <div class="stat-label">ุงูุญุงุถุฑูู ุงูููู</div>
            <div class="stat-value" id="adminPresentToday">0</div>
          </div>
        </div>
        <div class="stat-card">
          <div class="stat-icon">
            <i class="fas fa-times-circle"></i>
          </div>
          <div class="stat-details">
            <div class="stat-label">ุงูููุตุฑููู ุงูููู</div>
            <div class="stat-value" id="adminAbsentToday">0</div>
          </div>
        </div>
      </div>

      <!-- Employees Table with Filter -->
      <div class="content-section">
        <div class="section-header">
          <h2>ุงูููุธููู</h2>
          <div style="display: flex; gap: 15px; align-items: center; flex-wrap: wrap;">
            <!-- Search Bar -->
            <div class="search-container">
              <input type="text" id="adminMemberSearch" class="search-input" 
                     placeholder="ุจุญุซ ุนู ููุธู..." 
                     onkeyup="searchMembers(this.value)">
              <i class="fas fa-search search-icon"></i>
            </div>
            
            <div class="filters">
              <button class="admin-filter-btn active" data-filter="all">ุงููู</button>
              <button class="admin-filter-btn" data-filter="present">ุงูุญุงุถุฑูู</button>
              <button class="admin-filter-btn" data-filter="absent">ุงูููุตุฑููู</button>
            </div>
            
            <button class="btn btn-primary" onclick="exportEnhancedData()">
              <i class="fas fa-file-excel"></i>
              ุชุตุฏูุฑ ุงูุจูุงูุงุช ุงููุงููุฉ
            </button>
          </div>
        </div>
        <div class="table-responsive">
          <table class="data-table">
            <thead>
              <tr>
                <th>ุงูุงุณู</th>
                <th>ุงููุงุชุณุงุจ</th>
                <th>ุงูุญุงูุฉ</th>
                <th>ููุช ุงูุญุถูุฑ</th>
                <th>ููุช ุงูุงูุตุฑุงู</th>
                <th>ุงูุฅุฌุฑุงุกุงุช</th>
              </tr>
            </thead>
            <tbody id="adminMembersTableBody"></tbody>
          </table>
        </div>
      </div>

      <!-- Task Assignment for Admin -->
      <div class="content-section">
        <div class="section-header">
          <h2>ุฅุณูุงุฏ ูููุฉ ุฌุฏูุฏุฉ</h2>
        </div>
        <form id="adminTaskForm" class="task-form">
          <div class="form-row">
            <div class="form-group">
              <label>ุงูููุธู</label>
              <select id="adminTaskMember" required>
                <option value="">ุงุฎุชุฑ ุงูููุธู</option>
              </select>
            </div>
            <div class="form-group">
              <label>ููุน ุงููููุฉ</label>
              <select id="adminTaskType" required>
                <option value="">ุงุฎุชุฑ ุงูููุน</option>
                <option value="ููููุชุงุช">ููููุชุงุช</option>
                <option value="ููุชูููุดู">ููุชูููุดู</option>
                <option value="ุจูุณุชุงุช ูุฎุตุตุฉ">ุจูุณุชุงุช ูุฎุตุตุฉ</option>
                <option value="ุงูุณุชุง">ุงูุณุชุง</option>
                <option value="ุงูุจููุณ ูุฏูู">ุงูุจููุณ ูุฏูู</option>
                <option value="ุงูุจููุณ ุฌุฏูุฏ">ุงูุจููุณ ุฌุฏูุฏ</option>
                <option value="ุงูุจููุณ ุงูุณุชุง">ุงูุจููุณ ุงูุณุชุง</option>
              </select>
            </div>
          </div>
          <div class="form-group">
            <label>ุชูุงุตูู ุงููููุฉ</label>
            <textarea id="adminTaskDetails" placeholder="ุงูุชุจ ุชูุงุตูู ุงููููุฉ ููุง..." rows="3" required></textarea>
          </div>
          <button type="submit" class="btn btn-primary">ุฅุณูุงุฏ ุงููููุฉ</button>
        </form>

        <div class="section-header" style="margin-top: 40px;">
          <h3>ุงูููุงู ุงููุณูุฏุฉ</h3>
        </div>
        <div id="adminAllTasks" class="tasks-container"></div>
      </div>

      <!-- Comprehensive Tasks Dashboard -->
      <div class="content-section">
        <div class="section-header">
          <h2>๐ ููุญุฉ ุงูููุงู ุงูุดุงููุฉ</h2>
          <div style="display: flex; gap: 10px;">
            <button class="btn btn-secondary" onclick="filterAdminTasks('all')">
              <i class="fas fa-list"></i> ุงููู
            </button>
            <button class="btn btn-secondary" onclick="filterAdminTasks('pending')">
              <i class="fas fa-clock"></i> ููุฏ ุงูุงูุชุธุงุฑ
            </button>
            <button class="btn btn-secondary" onclick="filterAdminTasks('inProgress')">
              <i class="fas fa-spinner"></i> ููุฏ ุงูุชูููุฐ
            </button>
            <button class="btn btn-secondary" onclick="filterAdminTasks('completed')">
              <i class="fas fa-check-circle"></i> ููุชููุฉ
            </button>
          </div>
        </div>
        
        <div class="stats-grid" style="margin-bottom: 20px;">
          <div class="stat-card">
            <div class="stat-icon" style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);">
              <i class="fas fa-tasks"></i>
            </div>
            <div class="stat-details">
              <div class="stat-label">ุฅุฌูุงูู ุงูููุงู</div>
              <div class="stat-value" id="totalTasksCount">0</div>
            </div>
          </div>
          <div class="stat-card">
            <div class="stat-icon" style="background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);">
              <i class="fas fa-clock"></i>
            </div>
            <div class="stat-details">
              <div class="stat-label">ููุฏ ุงูุงูุชุธุงุฑ</div>
              <div class="stat-value" id="pendingTasksCount">0</div>
            </div>
          </div>
          <div class="stat-card">
            <div class="stat-icon" style="background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);">
              <i class="fas fa-spinner"></i>
            </div>
            <div class="stat-details">
              <div class="stat-label">ููุฏ ุงูุชูููุฐ</div>
              <div class="stat-value" id="inProgressTasksCount">0</div>
            </div>
          </div>
          <div class="stat-card">
            <div class="stat-icon" style="background: linear-gradient(135deg, #43e97b 0%, #38f9d7 100%);">
              <i class="fas fa-check-circle"></i>
            </div>
            <div class="stat-details">
              <div class="stat-label">ููุชููุฉ</div>
              <div class="stat-value" id="completedTasksCount">0</div>
            </div>
          </div>
        </div>
        
        <div id="comprehensiveTasksList" class="tasks-comprehensive"></div>
      </div>

      <!-- User Management -->
      <div class="content-section">
        <div class="section-header">
          <h2>ุฅุฏุงุฑุฉ ุงููุณุชุฎุฏููู</h2>
          <button class="btn btn-primary" onclick="openAddUserModal()">
            <i class="fas fa-plus"></i>
            ุฅุถุงูุฉ ูุณุชุฎุฏู ุฌุฏูุฏ
          </button>
        </div>
        <div class="table-responsive">
          <table class="data-table">
            <thead>
              <tr>
                <th>ุงูุงุณู</th>
                <th>ุงูุฏูุฑ</th>
                <th>ุงููุงุชุณุงุจ</th>
                <th>ุงูุจุฑูุฏ</th>
                <th>ุงูุฅุฌุฑุงุกุงุช</th>
              </tr>
            </thead>
            <tbody id="adminTableBody"></tbody>
          </table>
        </div>
      </div>

      <!-- Activity Log Section -->
      <div class="content-section">
        <div class="section-header">
          <h2>ุณุฌู ุงูุชุญุฑูุงุช</h2>
          <button class="btn btn-secondary" onclick="loadActivityLog()">
            <i class="fas fa-sync"></i> ุชุญุฏูุซ
          </button>
        </div>
        <div id="activityLogContainer" class="activity-log-container"></div>
      </div>

      <!-- Backup and Restore Section -->
      <div class="content-section">
        <div class="section-header">
          <h2>ุงููุณุฎ ุงูุงุญุชูุงุทู ูุงูุงุณุชุฑุฌุงุน</h2>
        </div>
        
        <div class="backup-cards">
          <div class="backup-card">
            <div class="backup-icon" style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);">
              <i class="fas fa-download"></i>
            </div>
            <div class="backup-content">
              <h3>ุฅูุดุงุก ูุณุฎุฉ ุงุญุชูุงุทูุฉ</h3>
              <p>ุงุญูุธ ุฌููุน ุงูุจูุงูุงุช (ููุธูููุ ููุงูุ ุทูุจุงุช) ูู ููู JSON</p>
              <button class="btn btn-primary" onclick="createBackup()">
                <i class="fas fa-download"></i> ุชุญููู ุงููุณุฎุฉ ุงูุงุญุชูุงุทูุฉ
              </button>
            </div>
          </div>
          
          <div class="backup-card">
            <div class="backup-icon" style="background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);">
              <i class="fas fa-upload"></i>
            </div>
            <div class="backup-content">
              <h3>ุงุณุชุฑุฌุงุน ูุณุฎุฉ ุงุญุชูุงุทูุฉ</h3>
              <p>ุงุณุชุฑุฌุน ุงูุจูุงูุงุช ูู ููู ูุณุฎุฉ ุงุญุชูุงุทูุฉ ุณุงุจูุฉ</p>
              <button class="btn btn-warning" onclick="restoreBackup()">
                <i class="fas fa-upload"></i> ุงุณุชุฑุฌุงุน ุงููุณุฎุฉ ุงูุงุญุชูุงุทูุฉ
              </button>
            </div>
          </div>
          
          <div class="backup-card">
            <div class="backup-icon" style="background: linear-gradient(135deg, #fa709a 0%, #fee140 100%);">
              <i class="fas fa-info-circle"></i>
            </div>
            <div class="backup-content">
              <h3>ูุนูููุงุช ูููุฉ</h3>
              <ul style="text-align: right; line-height: 2; color: var(--text-secondary); font-size: 14px;">
                <li>โ ุงููุณุฎ ุงูุงุญุชูุงุทู ูุญูุธ ูู ุงูุจูุงูุงุช</li>
                <li>โ ูุชู ุฅูุดุงุก ูุณุฎุฉ ุชููุงุฆูุฉ ูู 24 ุณุงุนุฉ</li>
                <li>โ๏ธ ุงุญูุธ ุงูููู ูู ููุงู ุขูู</li>
                <li>โ๏ธ ุงูุงุณุชุฑุฌุงุน ูุณุชุจุฏู ุงูุจูุงูุงุช ุงูุญุงููุฉ</li>
              </ul>
            </div>
          </div>
        </div>
        
        <div class="backup-info-box">
          <h4><i class="fas fa-lightbulb"></i> ูุตุงุฆุญ:</h4>
          <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 15px; margin-top: 15px;">
            <div class="tip-card">
              <strong>๐ ุงุนูู ูุณุฎุฉ ุงุญุชูุงุทูุฉ:</strong>
              <p>ูู ููุงูุฉ ููู ุฃู ุจุนุฏ ุฃู ุชุบููุฑ ูุจูุฑ</p>
            </div>
            <div class="tip-card">
              <strong>โ๏ธ ุงุญูุธ ุงููุณุฎุฉ:</strong>
              <p>ุนูู Google Drive ุฃู Dropbox ุฃู ููุงุดุฉ</p>
            </div>
            <div class="tip-card">
              <strong>๐ ุฎูู ูุณุฎ ูุชุนุฏุฏุฉ:</strong>
              <p>ูุณุฎุฉ ุนูู ุงูุฌูุงุฒ + ูุณุฎุฉ ุนูู ุงูุณุญุงุจุฉ</p>
            </div>
          </div>
        </div>
      </div>

      <!-- Requests Management -->
      <div class="content-section">
        <div class="section-header">
          <h2>ุทูุจุงุช ุงูููุธููู</h2>
          <span class="requests-count" id="requestsCount">0 ุทูุจ ุฌุฏูุฏ</span>
        </div>
        <div id="adminRequests" class="requests-container"></div>
      </div>
      
        </div><!-- End Tab Overview -->
        
        <!-- Other tabs will be added by JavaScript dynamically -->
        <!-- They will show/hide the existing content sections -->
        
      </div><!-- End dashboard-content -->
    </div><!-- End admin-with-sidebar -->
  </div><!-- End adminDashboard -->

  <!-- Modal for Add/Edit User -->
  <div id="userModal" class="modal">
    <div class="modal-overlay" onclick="closeModal()"></div>
    <div class="modal-content">
      <div class="modal-header">
        <h2 id="modalTitle">ุฅุถุงูุฉ ูุณุชุฎุฏู ุฌุฏูุฏ</h2>
        <button class="modal-close" onclick="closeModal()">
          <i class="fas fa-times"></i>
        </button>
      </div>
      <form id="userModalForm">
        <div class="form-group">
          <label>ุงูุฏูุฑ</label>
          <select id="modalRole" required>
            <option value="member">ููุธู</option>
            <option value="leader">ูุงุฆุฏ ูุฑูู</option>
          </select>
        </div>
        <div class="form-group">
          <label>ุงูุงุณู</label>
          <input type="text" id="modalName" required>
        </div>
        <div class="form-group">
          <label>ูููุฉ ุงููุฑูุฑ (4 ุฃุฑูุงู)</label>
          <input type="password" id="modalPassword" maxlength="4" pattern="[0-9]{4}" required>
        </div>
        <div class="form-group">
          <label>ุฑูู ุงููุงุชุณุงุจ</label>
          <input type="tel" id="modalWhatsapp">
        </div>
        <div class="form-group">
          <label>ุงูุจุฑูุฏ ุงูุฅููุชุฑููู</label>
          <input type="email" id="modalEmail">
        </div>
        
        <!-- Leader Shift -->
        <div id="leaderModalFields" class="hidden">
          <div class="form-group">
            <label>ุงูุดููุช</label>
            <select id="modalShift">
              <option value="">ุงุฎุชุฑ ุงูุดููุช</option>
              <option value="ุตุจุงุญู">ุตุจุงุญู</option>
              <option value="ูุณุงุฆู">ูุณุงุฆู</option>
            </select>
          </div>
        </div>

        <!-- Member Fields -->
        <div id="memberModalFields" class="hidden">
          <div class="form-group">
            <label>ููู ุงูุฅุฌุงุฒุฉ</label>
            <select id="modalDayOff">
              <option value="">ุงุฎุชุฑ ููู ุงูุฅุฌุงุฒุฉ</option>
              <option value="ุงูุณุจุช">ุงูุณุจุช</option>
              <option value="ุงูุฃุญุฏ">ุงูุฃุญุฏ</option>
              <option value="ุงูุงุซููู">ุงูุงุซููู</option>
              <option value="ุงูุซูุงุซุงุก">ุงูุซูุงุซุงุก</option>
              <option value="ุงูุฃุฑุจุนุงุก">ุงูุฃุฑุจุนุงุก</option>
              <option value="ุงูุฎููุณ">ุงูุฎููุณ</option>
              <option value="ุงูุฌูุนุฉ">ุงูุฌูุนุฉ</option>
            </select>
          </div>
          <div class="form-group">
            <label>ููุช ุงูุญุถูุฑ</label>
            <input type="time" id="modalCheckIn">
          </div>
          <div class="form-group">
            <label>ููุช ุงูุงูุตุฑุงู</label>
            <input type="time" id="modalCheckOut">
          </div>
          <div class="form-group">
            <label>ุงูุฑุงุชุจ ุงูุฃุณุงุณู (ุฌููู)</label>
            <input type="number" id="modalBaseSalary" placeholder="ูุซุงู: 5000" min="0">
          </div>
        </div>

        <div class="modal-actions">
          <button type="button" class="btn btn-secondary" onclick="closeModal()">ุฅูุบุงุก</button>
          <button type="submit" class="btn btn-primary">ุญูุธ</button>
        </div>
      </form>
    </div>
  </div>

  <!-- Exception Request Modal -->
  <div id="exceptionModal" class="modal">
    <div class="modal-overlay" onclick="closeExceptionModal()"></div>
    <div class="modal-content">
      <div class="modal-header">
        <h2>ุทูุจ ุงุณุชุฆุฐุงู</h2>
        <button class="modal-close" onclick="closeExceptionModal()">
          <i class="fas fa-times"></i>
        </button>
      </div>
      <form id="exceptionForm">
        <div class="form-group">
          <label>ููุช ุงููุบุงุฏุฑุฉ ุงููุทููุจ</label>
          <input type="time" id="exceptionTime" required>
        </div>
        <div class="form-group">
          <label>ุงูุณุจุจ</label>
          <textarea id="exceptionReason" placeholder="ุงูุชุจ ุณุจุจ ุงูุงุณุชุฆุฐุงู..." rows="4" required></textarea>
        </div>
        <div class="modal-actions">
          <button type="button" class="btn btn-secondary" onclick="closeExceptionModal()">ุฅูุบุงุก</button>
          <button type="submit" class="btn btn-primary">ุฅุฑุณุงู ุงูุทูุจ</button>
        </div>
      </form>
    </div>
  </div>

  <!-- Break Request Modal -->
  <div id="breakModal" class="modal">
    <div class="modal-overlay" onclick="closeBreakModal()"></div>
    <div class="modal-content">
      <div class="modal-header">
        <h2>ุทูุจ ุจุฑูู</h2>
        <button class="modal-close" onclick="closeBreakModal()">
          <i class="fas fa-times"></i>
        </button>
      </div>
      <form id="breakForm">
        <div class="form-group">
          <label>ูุฏุฉ ุงูุจุฑูู</label>
          <select id="breakDuration" required>
            <option value="">ุงุฎุชุฑ ุงููุฏุฉ</option>
            <option value="15">15 ุฏูููุฉ</option>
            <option value="30">30 ุฏูููุฉ</option>
            <option value="45">45 ุฏูููุฉ</option>
            <option value="60">ุณุงุนุฉ</option>
          </select>
        </div>
        <div class="form-group">
          <label>ููุงุญุธุงุช (ุงุฎุชูุงุฑู)</label>
          <textarea id="breakNotes" placeholder="ุฃู ููุงุญุธุงุช ุฅุถุงููุฉ..." rows="3"></textarea>
        </div>
        <div class="modal-actions">
          <button type="button" class="btn btn-secondary" onclick="closeBreakModal()">ุฅูุบุงุก</button>
          <button type="submit" class="btn btn-primary">ุฅุฑุณุงู ุงูุทูุจ</button>
        </div>
      </form>
    </div>
  </div>

  <!-- Vacation Request Modal -->
  <div id="vacationModal" class="modal">
    <div class="modal-overlay" onclick="closeVacationModal()"></div>
    <div class="modal-content">
      <div class="modal-header">
        <h2>ุทูุจ ุฅุฌุงุฒุฉ</h2>
        <button class="modal-close" onclick="closeVacationModal()">
          <i class="fas fa-times"></i>
        </button>
      </div>
      <form id="vacationForm" onsubmit="event.preventDefault(); requestVacation();">
        <div class="form-group">
          <label>ุชุงุฑูุฎ ุงูุจุฏุงูุฉ</label>
          <input type="date" id="vacationStartDate" required>
        </div>
        <div class="form-group">
          <label>ุชุงุฑูุฎ ุงูููุงูุฉ</label>
          <input type="date" id="vacationEndDate" required>
        </div>
        <div class="form-group">
          <label>ุงูุณุจุจ</label>
          <textarea id="vacationReason" placeholder="ุงูุชุจ ุณุจุจ ุทูุจ ุงูุฅุฌุงุฒุฉ..." rows="4" required></textarea>
        </div>
        <div class="modal-actions">
          <button type="button" class="btn btn-secondary" onclick="closeVacationModal()">ุฅูุบุงุก</button>
          <button type="submit" class="btn btn-primary">ุฅุฑุณุงู ุงูุทูุจ</button>
        </div>
      </form>
    </div>
  </div>

  <!-- Rating Modal -->
  <div id="ratingModal" class="modal">
    <div class="modal-overlay" onclick="closeRatingModal()"></div>
    <div class="modal-content">
      <div class="modal-header">
        <h2>ุชูููู ุงูููุธู</h2>
        <button class="modal-close" onclick="closeRatingModal()">
          <i class="fas fa-times"></i>
        </button>
      </div>
      <form id="ratingForm">
        <div class="form-group">
          <label>ุงูุงูุชุฒุงู (ูู 5)</label>
          <select id="ratingCommitment" required>
            <option value="">ุงุฎุชุฑ ุงูุชูููู</option>
            <option value="1">1 - ุถุนูู ุฌุฏุงู</option>
            <option value="2">2 - ุถุนูู</option>
            <option value="3">3 - ูุชูุณุท</option>
            <option value="4">4 - ุฌูุฏ</option>
            <option value="5">5 - ููุชุงุฒ</option>
          </select>
        </div>
        <div class="form-group">
          <label>ุงูุฃุฏุงุก (ูู 5)</label>
          <select id="ratingPerformance" required>
            <option value="">ุงุฎุชุฑ ุงูุชูููู</option>
            <option value="1">1 - ุถุนูู ุฌุฏุงู</option>
            <option value="2">2 - ุถุนูู</option>
            <option value="3">3 - ูุชูุณุท</option>
            <option value="4">4 - ุฌูุฏ</option>
            <option value="5">5 - ููุชุงุฒ</option>
          </select>
        </div>
        <div class="form-group">
          <label>ุงูุชุนุงูู (ูู 5)</label>
          <select id="ratingCooperation" required>
            <option value="">ุงุฎุชุฑ ุงูุชูููู</option>
            <option value="1">1 - ุถุนูู ุฌุฏุงู</option>
            <option value="2">2 - ุถุนูู</option>
            <option value="3">3 - ูุชูุณุท</option>
            <option value="4">4 - ุฌูุฏ</option>
            <option value="5">5 - ููุชุงุฒ</option>
          </select>
        </div>
        <div class="form-group">
          <label>ุงูุฌูุฏุฉ (ูู 5)</label>
          <select id="ratingQuality" required>
            <option value="">ุงุฎุชุฑ ุงูุชูููู</option>
            <option value="1">1 - ุถุนูู ุฌุฏุงู</option>
            <option value="2">2 - ุถุนูู</option>
            <option value="3">3 - ูุชูุณุท</option>
            <option value="4">4 - ุฌูุฏ</option>
            <option value="5">5 - ููุชุงุฒ</option>
          </select>
        </div>
        <div class="form-group">
          <label>ููุงุญุธุงุช (ุงุฎุชูุงุฑู)</label>
          <textarea id="ratingNotes" placeholder="ุฃู ููุงุญุธุงุช ุฅุถุงููุฉ..." rows="3"></textarea>
        </div>
        <div class="modal-actions">
          <button type="button" class="btn btn-secondary" onclick="closeRatingModal()">ุฅูุบุงุก</button>
          <button type="button" class="btn btn-primary" onclick="rateMember(currentRatingMemberId)">ุญูุธ ุงูุชูููู</button>
        </div>
      </form>
    </div>
  </div>

  <!-- Note/Warning Modal -->
  <div id="noteModal" class="modal">
    <div class="modal-overlay" onclick="closeNoteModal()"></div>
    <div class="modal-content">
      <div class="modal-header">
        <h2 id="noteModalTitle">ุฅุถุงูุฉ ููุงุญุธุฉ</h2>
        <button class="modal-close" onclick="closeNoteModal()">
          <i class="fas fa-times"></i>
        </button>
      </div>
      <form id="noteForm">
        <div class="form-group">
          <label>ุงููุต</label>
          <textarea id="noteText" placeholder="ุงูุชุจ ุงูููุงุญุธุฉ ุฃู ุงูุฅูุฐุงุฑ ููุง..." rows="4" required></textarea>
        </div>
        <div class="modal-actions">
          <button type="button" class="btn btn-secondary" onclick="closeNoteModal()">ุฅูุบุงุก</button>
          <button type="button" class="btn btn-primary" onclick="addNote(currentNoteMemberId, currentNoteType)">ุญูุธ</button>
        </div>
      </form>
    </div>
  </div>

  <!-- Report Modal -->
  <div id="reportModal" class="modal">
    <div class="modal-overlay" onclick="closeReportModal()"></div>
    <div class="modal-content modal-large">
      <div class="modal-header">
        <h2>ุงูุชูุฑูุฑ ุงูุดูุฑู</h2>
        <button class="modal-close" onclick="closeReportModal()">
          <i class="fas fa-times"></i>
        </button>
      </div>
      <div id="reportContent"></div>
      <div class="modal-actions">
        <button type="button" class="btn btn-primary" onclick="closeReportModal()">ุฅุบูุงู</button>
      </div>
    </div>
  </div>

  <!-- Salary Modal -->
  <div id="salaryModal" class="modal">
    <div class="modal-overlay" onclick="closeSalaryModal()"></div>
    <div class="modal-content">
      <div class="modal-header">
        <h2>ุชูุฑูุฑ ุงูุฑุงุชุจ</h2>
        <button class="modal-close" onclick="closeSalaryModal()">
          <i class="fas fa-times"></i>
        </button>
      </div>
      <div id="salaryContent"></div>
      <div class="modal-actions">
        <button type="button" class="btn btn-primary" onclick="closeSalaryModal()">ุฅุบูุงู</button>
      </div>
    </div>
  </div>

  <!-- Dark Mode Toggle Button -->
  <button class="dark-mode-toggle" onclick="toggleDarkMode()" title="ุชุจุฏูู ุงููุถุน ุงููููู">
    <i class="fas fa-moon"></i>
  </button>

  <script src="system.js"></script>
</body>
</html>
